<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BrainThink Create Blog Posts Page - JO NorOff Exam 1</title>
    <link rel="icon" type="image/png" href="/images/brain-solid.svg" />
    <link rel="stylesheet" href="src/styles/blogposts.css" />

    <!-- Font Awesome-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!--HOTJAR-->
    <!-- Hotjar Tracking Code for https://funny-kringle-b8be3e.netlify.app/ -->
    <script>
      (function (h, o, t, j, a, r) {
        h.hj =
          h.hj ||
          function () {
            (h.hj.q = h.hj.q || []).push(arguments);
          };
        h._hjSettings = { hjid: 3504174, hjsv: 6 };
        a = o.getElementsByTagName("head")[0];
        r = o.createElement("script");
        r.async = 1;
        r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
        a.appendChild(r);
      })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
    </script>
  </head>
  <body>
    <header>
      <a href="index.html"
        ><h1><i class="fa-solid fa-brain"></i>Think</h1></a
      >
      <div class="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <ul class="menu">
        <li><a href="#">Blog</a></li>

        <li><a href="/about.html">About us</a></li>
        <li><a href="/contact.html">Contact us</a></li>
      </ul>

      <button class="subBtn">
        <a href="#">SUBSCRIBE</a>
      </button>
    </header>
    <hr />
    <main>
      <div class="back-arrow">
        <a href="index.html"><i class="fa-solid fa-arrow-left"></i></a>
      </div>
      <div id="loading"></div>
      <div class="btn">
        <a href="createblogp.html" target="_blank">
          <button class="pop-on-hover">
            Create your Blog Post Here
            <i class="fa-solid fa-square-arrow-up-right"></i>
          </button>
        </a>
      </div>

      <div class="intro">
        <h1>Share whats on your Mind And refresh</h1>
      </div>

      <div id="content">
        <div class="container"></div>
      </div>
    </main>

    <footer>
      <div class="footer-container">
        <a href="index.html"
          ><h4><i class="fa-solid fa-brain"></i>Think</h4></a
        >
        <div class="editor">
          <h5>
            Front Page Editor:
            <span>J.Oino</span>
          </h5>

          <small>Jon@Email.com</small>
        </div>

        <div class="contact">
          <a href="contact.html"
            ><button>
              Contact Us Here <i class="fa-solid fa-envelope"></i></button
          ></a>
        </div>

        <div class="fqa">
          <h5>FQA</h5>
          <ul>
            <li>
              <a href="/about.html"
                ><i class="fa-solid fa-chevron-right"></i>About Us</a
              >
            </li>
            <li>
              <a href="/contact.html"
                ><i class="fa-solid fa-chevron-right"></i>Contribute with
                Content</a
              >
            </li>
            <li>
              <a href="/contact.html"
                ><i class="fa-solid fa-chevron-right"></i>Publishing Rights</a
              >
            </li>
          </ul>
        </div>
      </div>
    </footer>
    <script>
      (async () => {
        try {
          const loadingDiv = document.getElementById("loading");
          const contentDiv = document.getElementById("content");

          // Show the loading indicator
          loadingDiv.style.display = "block";
          contentDiv.style.display = "none";

          const response = await fetch(
            "https://api.airtable.com/v0/apptXDjECOed3FGCI/Blog%20Posts?maxRecords=3&view=Grid%20view",
            {
              method: "GET",
              headers: {
                Authorization:
                  "Bearer patRYdlWCaONn6Gwy.50c762580e8bdba370c2abbe5b9fb2bbaed374ffe078a7ab6b78de93155a92fa",
              },
            }
          );

          if (response.ok) {
            const result = await response.json();

            // Remove the loading indicator and show the content
            loadingDiv.style.display = "none";
            contentDiv.style.display = "block";

            // Create the innerHTML with the records data
            let innerHTML = "";
            result.records.forEach((record) => {
              const name = record.fields["Name"];
              const notes = record.fields["Notes"];
              innerHTML += `<div class="blog-wrapper">
          <div class="blog-holder">
            <h2>${name}</h2>
            <br/>
          <div class="text-con"
          <p>${notes}</p>
          <div class="btn-container">
            <button id="btnh1" class="btn">
              <i class="fa-regular fa-thumbs-up"></i>
              
              </button>

              <button id="btnh2" class="btn">
              <i class="fa-regular fa-thumbs-down"></i>
              
              </button>  
              
           
          </div>

          </div>
        </div>
        </div>`;
            });

            // Set the innerHTML to the #content element
            contentDiv.innerHTML = innerHTML;
          }
        } catch (err) {
          console.error(err);
        }
      })();
    </script>

    <script src="javascript/menutoggle.js"></script>
  </body>
</html>
